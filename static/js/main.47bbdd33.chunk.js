(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,r,t){e.exports=t(71)},50:function(e,r,t){},71:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),o=t(36),i=t.n(o),s=t(9),c=t(10),l=t(13),u=t(11),p=t(14),h=(t(50),t(31)),g=t.n(h),d=t(37),f=t(12),m=t(18),v=t(19),w=t.n(v);function y(){var e=Object(m.a)(["\n  query($userLogin: String!) {\n    user(login: $userLogin) {\n      login\n      url\n      name\n      bio\n      company\n      email\n      followers {\n        totalCount\n      }\n      location\n      organizations {\n        totalCount\n      }\n      repositories (privacy: PUBLIC, isFork: false) {\n        totalCount\n      }\n    }\n  }\n"]);return y=function(){return e},e}var b=w()(y()),O=t(32),E=t(27),j=function(e){var r=e.repoName,t=e.language,n=e.description,o=e.dateCreated;return a.a.createElement("div",{className:"repoBlock"},a.a.createElement("p",{className:"repoName"},a.a.createElement("span",null,r)),a.a.createElement("p",{className:"repoTextData"},"Repository created: ",o,". ",t?" Main language - ".concat(t):""),a.a.createElement("p",{className:"repoTextData repoDescription"},n))};function k(){var e=Object(m.a)(["\n  query ($userLogin: String!, $reposCursor: String) {\n    repositoryOwner(login: $userLogin) {\n      id\n      avatarUrl\n      repositories(privacy: PUBLIC, isLocked: false, isFork: false, first: 5, after: $reposCursor) {\n        totalCount\n        edges {\n          node {\n            id\n            name\n            createdAt\n            description\n            primaryLanguage {\n                name\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]);return k=function(){return e},e}var C=w()(k()),L=function(e){function r(){var e,t;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(u.a)(r)).call.apply(e,[this].concat(a)))).state={reposCursor:null},t}return Object(p.a)(r,e),Object(c.a)(r,[{key:"render",value:function(){var e=this.props.login;return a.a.createElement(f.Query,{query:C,variables:{userLogin:e,reposCursor:null},skip:""===e,notifyOnNetworkStatusChange:!0},function(r){var t=r.data,n=r.loading,o=r.error,i=r.fetchMore;o&&console.log(o);var s=t.repositoryOwner;if(n&&!s)return a.a.createElement("div",{className:"loading"},"Loading...");var c=s.repositories,l=c.edges.map(function(e,r){var t=e.node,n=t.name,o=t.primaryLanguage,i=t.description,s=t.createdAt,c=o?o.name:null,l=s.slice(0,10);return a.a.createElement(j,{repoName:n,language:c,dateCreated:l,description:i})});return a.a.createElement("div",null,l,a.a.createElement("div",null,c.pageInfo.hasNextPage&&a.a.createElement("button",{onClick:function(){return i({variables:{userLogin:e,reposCursor:c.pageInfo.endCursor},updateQuery:function(e,r){var t=r.fetchMoreResult.repositoryOwner.repositories,n=t.edges,a=t.pageInfo;return n.length?Object(E.a)({},e,{repositoryOwner:Object(E.a)({},e.repositoryOwner,{__typename:e.repositoryOwner.__typename,repositories:Object(E.a)({},e.repositoryOwner.repositories,{__typename:e.repositoryOwner.repositories.__typename,edges:[].concat(Object(O.a)(e.repositoryOwner.repositories.edges),Object(O.a)(n)),pageInfo:a})})}):e}})}},"Show more user repos")))})}}]),r}(n.Component),N=function(e){function r(){var e,t;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(u.a)(r)).call.apply(e,[this].concat(o)))).state={showFetchedRepositories:!1},t.prepareUserParameter=function(e,r){return r?a.a.createElement("p",{className:"userParam",key:e},a.a.createElement("span",{className:"userParamName"},e),": ",r):null},t.getUserParamsAsArray=function(e){return Object.keys(e).map(function(r){var n=e[r];return t.prepareUserParameter(r,n)})},t.showRepositories=function(){var e=t.props.userData.login;return a.a.createElement(L,{login:e})},t.fetchRepositories=function(e){e.preventDefault();var r=t.props.userData.login;return t.setState({showFetchedRepositories:!0}),a.a.createElement(L,{login:r})},t}return Object(p.a)(r,e),Object(c.a)(r,[{key:"render",value:function(){var e=this.props.userData,r=this.state.showFetchedRepositories,t=this.getUserParamsAsArray(e);return a.a.createElement("div",{className:"userInfoBlock"},a.a.createElement("div",null,t.map(function(e){return e})),a.a.createElement("div",null,a.a.createElement("button",{onClick:this.fetchRepositories},"Get user repos"),r?this.showRepositories():null))}}]),r}(n.Component),S=Object(f.withApollo)(N),U=function(e){function r(){var e,t;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(u.a)(r)).call.apply(e,[this].concat(o)))).state={searchInput:"",isSearching:!1,showLoading:!1,userData:{},isUserFetched:!1,error:null},t.searchForUser=function(){var e=Object(d.a)(g.a.mark(function e(r){var n,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.state.searchInput){e.next=3;break}return e.abrupt("return");case 3:return t.setState(function(e){return{userData:{},isUserFetched:!1,showLoading:!0}}),e.next=6,t.props.client.query({query:b,variables:{userLogin:t.state.searchInput},loading:!0,errorPolicy:"all"});case 6:if(!(a=e.sent).data.user){e.next=12;break}n=t.prepareUserData(a.data.user),Object.prototype.hasOwnProperty.call(n,"login")&&t.setState({isUserFetched:!0}),e.next=15;break;case 12:if(!a.error){e.next=15;break}return t.setState(function(e){return{showLoading:!e.showLoading,isSearching:!e.isSearching,error:a.error[0].message}}),e.abrupt("return");case 15:t.setState(function(e){return{showLoading:!e.showLoading,isSearching:!e.isSearching,userData:n}});case 16:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),t.saveSearchInput=function(e){e.target.value&&t.setState({searchInput:e.target.value})},t.showLoading=function(){return t.state.showLoading?a.a.createElement("div",{className:"loading"},"Loading..."):null},t.prepareUserData=function(e){var r=e.name,t=e.login,n=e.email,a=e.url,o=e.bio,i=e.location,s=e.company,c=e.followers,l=e.repositories,u=e.organizations;return{name:r,login:t,email:n,url:a,bio:o,location:i,company:s,followers:c.totalCount,repositories:l.totalCount,organizations:u.totalCount}},t.onEnterPress=function(e){13===e.keyCode&&t.searchForUser(e)},t}return Object(p.a)(r,e),Object(c.a)(r,[{key:"render",value:function(){var e=this.state,r=e.userData,t=e.isUserFetched,n=e.error;return a.a.createElement("div",{className:"searchWrapper"},a.a.createElement("div",null,a.a.createElement("input",{className:"searchInput",type:"text",onChange:this.saveSearchInput,onKeyDown:this.onEnterPress}),a.a.createElement("button",{className:"searchButton",onClick:this.searchForUser},"Search for user")),a.a.createElement("div",null,this.showLoading(),t&&!n?a.a.createElement(S,{userData:r}):a.a.createElement("div",{className:"errorMessage"},n)))}}]),r}(n.Component),D=Object(f.withApollo)(U),I=function(e){function r(){return Object(s.a)(this,r),Object(l.a)(this,Object(u.a)(r).apply(this,arguments))}return Object(p.a)(r,e),Object(c.a)(r,[{key:"render",value:function(){return a.a.createElement("div",{className:"appWrapper"},a.a.createElement("div",{className:"appHeader"},a.a.createElement("p",null,"Check public repositories of any user!"),a.a.createElement("p",null,"Simply type user login for GitHub.")),a.a.createElement(D,null))}}]),r}(n.Component),P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var r=e.installing;r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var A=t(23),F=t(43),R=t(78),B=new F.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat("b85fa99482675162e73322f80345804ddcd4e1cc")}}),_=new A.a({link:B,cache:new R.a});i.a.render(a.a.createElement(f.ApolloProvider,{client:_},a.a.createElement(I,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/show-me-your-github",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/show-me-your-github","/service-worker.js");P?(function(e){fetch(e).then(function(r){404===r.status||-1===r.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):x(e)})}}()}},[[45,2,1]]]);
//# sourceMappingURL=main.47bbdd33.chunk.js.map